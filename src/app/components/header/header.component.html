<nav class="bg-[var(--c-bg-surface)] border-b border-[var(--c-border-subtle)] shadow-sm sticky top-0 z-50">
  <!-- Hidden references to signals to trigger change detection -->
  <span class="hidden">{{ themeService.theme() }}</span>
  <span class="hidden">{{ targetLanguage()?.code }}</span>
  <div class="container mx-auto px-4 py-3 flex justify-between items-center">
    <a routerLink="/home" class="flex items-center space-x-2 hover:opacity-80 transition-opacity cursor-pointer">
      <!-- SVG Logo -->
      <svg width="40" height="40" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <linearGradient id="logoGradient" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" style="stop-color:#667eea;stop-opacity:1" />
            <stop offset="100%" style="stop-color:#764ba2;stop-opacity:1" />
          </linearGradient>
        </defs>
        <!-- Antenna Stalk -->
        <line x1="50" y1="32" x2="50" y2="15" stroke="#FFFFFF" stroke-width="8" stroke-linecap="round" />
        <line x1="50" y1="32" x2="50" y2="15" stroke="url(#logoGradient)" stroke-width="4" stroke-linecap="round" />
        <!-- Main Head Shape -->
        <rect x="20" y="30" width="60" height="55" rx="15" fill="url(#logoGradient)" stroke="#FFFFFF"
          stroke-width="3" />
        <!-- Antenna Light -->
        <circle cx="50" cy="12" r="7" fill="url(#logoGradient)" stroke="#FFFFFF" stroke-width="3" />
        <!-- Eyes -->
        <circle cx="38" cy="50" r="7" fill="#FFFFFF" />
        <circle cx="62" cy="50" r="7" fill="#FFFFFF" />
        <!-- Smile -->
        <path d="M 35 68 Q 50 80 65 68" stroke="#FFFFFF" stroke-width="4" fill="none" stroke-linecap="round" />
      </svg>
      <span class="text-2xl font-bold text-gradient">Poli /ˈpɒ.lɪ.ɡlɒt/</span>
    </a>
    <div class="hidden md:flex space-x-8">
      <a [routerLink]="['/home']" fragment="home"
        class="text-[var(--c-text-body)] hover:text-purple-600 transition font-medium">Home</a>
      <a [routerLink]="['/home']" fragment="languages"
        class="text-[var(--c-text-body)] hover:text-purple-600 transition font-medium">Languages</a>
      <a [routerLink]="['/home']" fragment="features"
        class="text-[var(--c-text-body)] hover:text-purple-600 transition font-medium">Features</a>
      <a [routerLink]="['/home']" fragment="pricing"
        class="text-[var(--c-text-body)] hover:text-purple-600 transition font-medium">Pricing</a>
      <a routerLink="/intro" class="text-[var(--c-text-body)] hover:text-purple-600 transition font-medium">About</a>
    </div>
    <div class="flex items-center space-x-4">
      <!-- Target Language Flag -->
      @if (targetLanguage(); as lang) {
      <button (click)="navigateToLanguageWizard()" type="button"
        class="flex items-center justify-center w-8 h-8 rounded-md bg-[var(--c-bg-muted)] border border-[var(--c-border-subtle)] hover:bg-[var(--c-bg-surface)] hover:border-[var(--color-primary)]/30 transition-colors cursor-pointer focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2"
        [attr.aria-label]="'Change target language (currently ' + lang.display_name + ')'">
        <span class="fi fi-{{ lang.flag }} rounded-sm text-lg"></span>
      </button>
      }
      <!-- Theme Toggle Icon -->
      <button (click)="toggleTheme()" type="button"
        class="p-2 rounded-md text-[var(--c-text-body)] hover:bg-[var(--c-bg-muted)] transition-colors focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2"
        [attr.aria-label]="theme() === 'dark' ? 'Switch to light theme' : 'Switch to dark theme'">
        @if (theme() === 'dark') {
        <i class="fa-solid fa-moon text-xl"></i>
        } @else {
        <i class="fa-solid fa-sun text-xl text-yellow-500"></i>
        }
      </button>
      @if (store.isConfigured()) {
      <a routerLink="/selector"
        class="text-[var(--c-text-body)] hover:text-purple-600 font-medium transition">Dashboard</a>
      <a routerLink="/settings"
        class="text-[var(--c-text-body)] hover:text-purple-600 font-medium transition">Settings</a>
      } @else {
      <a routerLink="/wizard" class="text-[var(--c-text-body)] hover:text-purple-600 font-medium transition">Login</a>
      <button (click)="navigateToApp()"
        class="bg-purple-600 text-white px-5 py-2.5 rounded-full font-medium hover:bg-purple-700 transition shadow-sm hover:shadow-md">Sign
        Up Free</button>
      }
    </div>
  </div>
</nav>